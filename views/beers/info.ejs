<% layout('../layouts/boilerplate')%>
<main>
    <div class="allcontent" >
        <div class="menuflex-container">
            <div class="flex-item">
            <p class="new-beer"><%= success %></p>
            </div>
        </div>
        <p class="title" ><%= beer.name %></p>
        <div class="imageblocks" >
            <div>            
                <ul class="menuflex-container" >
                    <li class="flex-item" >ABV - <%= beer.abv%></li>
                    <li class="flex-item" >STYLE - <%= beer.style%></li>
                    <li class="flex-item" >IBU - <%= beer.ibu%></li>
                    <li class="flex-item" >DRY HOPS - <%= beer.dryHops%></li>
                    <li class="flex-item" >STATUS - <%= beer.ontap%></li>
                </ul>
                <br>
                <p class="descriptiontext" ><%= beer.description%></p>
            </div>
        </div>
        <% if(data === 'error'){%>

            <% } else { %> 
                <% let hotSideHops = [] %>
                <% let dryHops = [] %>
                <% let malts = [] %>
                 <% for (let i = 0; i < data.hops.length; i++){ %>
                    <% if (data.hops[i].use === 'Dry Hop'){ %> 
                    <% dryHops.push(data.hops[i]) %>
                    <% } else {%>
                        <% hotSideHops.push(data.hops[i]) %>
                        <% }} %>
                <% let dryHopsList = [] %> 
                <% let hotSideHopsList = [] %> 
                <% for (let i = 0; i < hotSideHops.length; i++){ %>
                       <% hotSideHopsList.push(hotSideHops[i].name)} %>
                <% for (let i = 0; i < dryHops.length; i++){ %>
                        <% dryHopsList.push(dryHops[i].name)} %>
                <% let maltsList = [] %> 
                <% // console.log(data.malts[0]) %> 
                <%  %>
                <% for (let i = 0; i < data.malts.length; i++){ %>
                         <% maltsList.push(data.malts[i].name)} %>
                <%  %>    

        <% %> 
        <p class="title" >Hops</p>
        <div class="imageblocks" >
            <div>            
                <ul class="menuflex-container" >
                    <li class="flex-item" >Bitter/Aroma <%= hotSideHopsList.join(', ')%></li>
                    <li class="flex-item" >Dry Hops <%= dryHopsList.join(' ')%></li>
                </ul>
                <br>
            </div>
        </div>
        <p class="title" >Malts</p>
        <div class="imageblocks" >
            <div>            
                <ul class="menuflex-container" >
                    <li class="flex-item" >Malts <%= maltsList.join(', ')%></li>
                </ul>
                <br>
            </div>
        </div>
        <p class="title" >Yeast</p>
        <div class="imageblocks" >
            <div>            
                <ul class="menuflex-container" >
                    <li class="flex-item" ><%= data.yeast.join(', ')%></li>
                </ul>
                <br>
            </div>
        </div>
        <div>
            <p>test area for brewfather data</p>
            <p class="descriptiontext" >BF Name = <%= beer.bfName%></p>
            <p class="descriptiontext" >BF ID =<%= beer.bfId%></p>
            <p class="descriptiontext" >Hot Side Hops =<%= hotSideHopsList.join(', ')%></p>
            <p class="descriptiontext" >Dry Hops = <%= dryHopsList.join(', ') %></p>
            <p class="descriptiontext" >yeast = <%= data.yeast.join(' ') %></p>
        </div>
        <% %>
        <% } %> 
        <br>   
        <div class="menuflex-container" >
            <% if(currentUser) { %> 
            <div class="flex-item">
            <a id="editButton" href="/beers/<%=beer._id %>/edit">Edit Beer</a>
            </div>
            <form class="flex-item" action="/beers/<%=beer._id%>?_method=DELETE" method="POST" >
                <button id="deleteButton" >Delete Beer</button>
            </form>
            <div class="flex-item">
                <a class="flex-item" href="/taplist">All Beers</a>
            </div>
            <% } else { %> 
            <div class="flex-item">
                <a class="flex-item" href="/taplist">All Beers</a>
            </div>
            <% } %> 
        </div>
    </div>
</main>